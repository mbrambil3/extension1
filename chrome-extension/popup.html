<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-Summarizer</title>
    <link rel="stylesheet" href="popup.css">
    <style>
      .btn-subscribe { background: #2563eb; color: #fff; }
      .btn-subscribe:hover { background: #1d4ed8; }
      .btn-activate { background: #f1f5f9; color: #0f172a; }
      .btn-activate.disabled { opacity: 0.6; cursor: not-allowed; }
      .hidden { display: none !important; }
    </style>
</head>
<body>
    <div class="popup-container">
        <div class="popup-header">
            <h2>üìÑ Auto-Summarizer</h2>
            <p class="version">v1.0.6</p>
        </div>
        
        <div class="popup-content">
            <div class="setting-item" style="margin-bottom:12px;">
                <label class="toggle-label">
                    <input type="checkbox" id="autoSummary" class="toggle-input">
                    <span class="toggle-slider"></span>
                    <span class="toggle-text">Resumo Autom√°tico</span>
                </label>
                <small class="setting-description">Gerar resumos automaticamente ao detectar artigos longos</small>
            </div>

            <div class="action-group">
                <div style="display:flex; gap:8px; align-items:center;">
                  <button id="generateNow" class="primary-btn" style="flex:1;">
                      üéØ Gerar Resumo Agora
                  </button>
                  <button id="stopNow" class="secondary-btn stop-btn" style="flex:0 0 auto; display:none;" title="Parar" aria-label="Parar">‚èπÔ∏è</button>
                </div>
                
                <button id="viewHistory" class="secondary-btn">
                    üìö Ver Hist√≥rico
                </button>

                <div class="separator" style="height:1px;background:#e2e8f0;margin:12px 0;"></div>
                <label for="pdfInput" class="secondary-btn" style="display:block;text-align:center;cursor:pointer;">
                    üìÑ Importar PDF para Resumo
                    <input id="pdfInput" type="file" accept="application/pdf" style="display:none" />
                </label>
            </div>

            <div class="setting-group" style="margin-top:16px;">

                <div class="setting-item">
                    <label for="language" class="setting-label">Idioma do Resumo</label>
                    <select id="language" class="setting-select">
                        <option value="pt">Portugu√™s</option>
                        <option value="en">Ingl√™s</option>
                    </select>
                </div>
                
                <div class="setting-item">
                    <label for="detailLevel" class="setting-label">N√≠vel de Detalhe</label>
                    <select id="detailLevel" class="setting-select">
                        <option value="short">Breve</option>
                        <option value="medium">M√©dio</option>
                        <option value="long">Detalhado</option>
                    </select>
                </div>

                <div class="setting-item">
                    <label for="persona" class="setting-label">Personalidade do Resumo</label>
                    <input id="persona" type="text" class="setting-select" placeholder="Ex.: Assertivo, Engra√ßado, Personagem do..." />
                    <small class="setting-description" style="margin-left:0;">Descreva como deseja o tom do resumo</small>
                </div>

                <details id="planSection" class="plan-section" style="border-top:1px solid #e2e8f0; margin-top:8px; padding-top:8px;">
                  <summary>Plano e Limites</summary>
                  <div id="planStatus" class="setting-description" style="margin-left:0; margin-top:8px;">Plano: Free ‚Ä¢ Hoje: 0/30</div>
                  
                  <div style="display:flex; flex-direction:column; gap:8px; margin-top:10px; align-items:stretch;">
                      <div style="display:flex; justify-content:center; align-items:center; gap:8px;">
                        <button id="subscribeBtn" class="secondary-btn btn-subscribe" style="width:auto; padding:10px 14px;">Assinar PREMIUM</button>
                        <span class="setting-description" style="margin:0; padding:6px 8px; background:#f1f5f9; border:1px solid #e2e8f0; border-radius:6px;">Resumos ILIMITADOS por 30 dias!</span>
                      </div>
                      <div class="separator" style="height:1px;background:#e2e8f0;margin:8px 0;"></div>

                      <div style="display:flex; justify-content:center; align-items:center; gap:8px;">
                        <button id="whatsappKeyBtn" class="secondary-btn" style="width:40px; height:38px; display:inline-flex; justify-content:center; align-items:center;">üîë</button>
                        <span class="setting-description" style="margin:0; padding:6px 8px; background:#f1f5f9; border:1px solid #e2e8f0; border-radius:6px;">Receber a KEY via Whatsapp</span>
                      </div>
                      <div class="separator" style="height:1px;background:#e2e8f0;margin:8px 0;"></div>

                      <div style="display:flex; align-items:center; gap:8px;">
                        <input id="subscriptionKey" type="text" class="setting-select" placeholder="KEY de ASSINATURA" style="width:100%; height:38px; border-radius:8px;" />
                        <small id="subscriptionHint" class="setting-description" style="display:block; margin:0;">Insira sua KEY para liberar PREMIUM.</small>
                      </div>

                      <button id="applyKeyBtn" class="secondary-btn btn-activate" style="flex:0 0 auto; background: linear-gradient(135deg, #22c55e 0%, #10b981 100%); color: #fff; border: none;">Ativar PREMIUM</button>
                  </div>
                </details>

                <details id="advancedOptions">
                  <summary>Op√ß√µes avan√ßadas</summary>
                  <div class="setting-item" style="margin-top:10px;">
                    <label for="openrouterKey" class="setting-label">OpenRouter API Key (opcional)</label>
                    <input id="openrouterKey" type="password" class="setting-select" placeholder="sk-or-v1-..." />
                    <small class="setting-description">Se preencher, usaremos sua pr√≥pria cota. Em branco, usamos a chave padr√£o.</small>
                  </div>

                </details>
            </div>
            
            <div class="info-group">
                <div class="shortcut-info">
                    <span class="shortcut-label">Atalho:</span>
                    <code class="shortcut-key">Ctrl+Shift+S</code>
                </div>
                
                <div class="status-indicator">
                    <span class="status-dot api-status active"></span>
                    <span class="status-text">Conex√£o API Ativa</span>
                </div>
            </div>
        </div>
        
        <div class="popup-footer">
            <small id="providerDisplay">Powered by Deepseek</small>
        </div>
    </div>
    
    <div id="toast-container" class="toast-container"></div>
    <script src="pdfjs/pdf.min.js"></script>
    <script src="popup.js"></script>
</body>
</html>